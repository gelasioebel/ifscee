<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IFSCEE - Veja C sendo Interpretado</title>
    /* Vari√°veis Globais */
    :root {
    /* Sistema de Cores */
    --color-primary: #3b82f6;
    --color-secondary: #374151;
    --color-background: #f3f4f6;
    --color-surface: white;
    --color-border: #d1d5db;
    --color-text-light: white;

    /* Cores de Estado */
    --color-success: #16a34a;
    --color-warning: #ca8a04;
    --color-error: #dc2626;

    /* Cores de Ambiente */
    --color-editor-bg: #111827;
    --color-editor-text: #4ade80;
    --color-terminal-bg: black;
    --color-terminal-text: white;

    /* Sistema de Espa√ßamento */
    --spacing-base: 8px;
    --spacing-double: 16px;

    /* Sistema de Bordas */
    --border-width: 1px;
    --border-width-resizable: 4px;
    --border-radius: 4px;
    --border-default: var(--border-width) solid var(--color-border);
    --border-resizable: var(--border-width-resizable) solid var(--color-border);

    /* Sistema de Layout */
    --height-viewport: 100vh;
    --height-header: 5vh;
    --height-footer: 5vh;
    --height-ast: 20vh;

    /* Layout Padr√£o */
    --layout-files-width: 10%;
    --layout-editor-width: 30%;
    --layout-memory-width: 60%;
    --layout-direction: row;
    --layout-tokens-direction: row;
    --layout-tokens-width: 50%;
    --layout-ast-width: 50%;
    --layout-stack-heap-direction: row;
    --layout-stack-width: 20%;
    --layout-heap-width: 80%;
    --layout-io-direction: row;
    }

    /* Reset */
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Lexend, sans-serif;
    }

    /* Layouts Alternativos */
    .layout--editor-focus {
    --layout-files-width: 10%;
    --layout-editor-width: 60%;
    --layout-memory-width: 30%;
    }

    .layout--stacked {
    --layout-direction: column;
    --layout-files-width: 100%;
    --layout-editor-width: 100%;
    --layout-memory-width: 100%;
    --height-ast: 30vh;
    }

    /* Componentes Base */
    .page-container {
    display: flex;
    flex-direction: column;
    height: var(--height-viewport);
    background-color: mediumpurple;
    }

    /* Componente: Borda Redimension√°vel */
    .resizable-border {
    position: relative;
    }

    .resizable-border--right {
    border-right: var(--border-resizable);
    cursor: col-resize;
    }

    .resizable-border--bottom {
    border-bottom: var(--border-resizable);
    cursor: row-resize;
    }

    .resizable-border--right:hover,
    .is-resizing-horizontal .resizable-border--right {
    border-right-color: var(--color-primary);
    }

    .resizable-border--bottom:hover,
    .is-resizing-vertical .resizable-border--bottom {
    border-bottom-color: var(--color-primary);
    }

    /* Componente: Cabe√ßalho */
    .header {
    display: flex;
    align-items: center;
    justify-content: center;
    position: sticky;
    background-color: var(--color-primary);
    color: var(--color-text-light);
    padding: var(--spacing-base);
    height: var(--height-header);
    border-bottom: var(--border-default);
    }

    /* Componente: Bot√µes */
    .button {
    background: none;
    border: none;
    cursor: pointer;
    padding: var(--spacing-base);
    color: inherit;
    }

    .button--action {
    background-color: var(--color-primary);
    color: var(--color-text-light);
    border-radius: var(--border-radius);
    }

    .button--success { background-color: var(--color-success); }
    .button--warning { background-color: var(--color-warning); }
    .button--error { background-color: var(--color-error); }

    /* Componente: Menu de Layout */
    .layout-menu {
    position: absolute;
    top: 100%;
    left: 0;
    background-color: var(--color-surface);
    border: var(--border-default);
    border-radius: var(--border-radius);
    display: none;
    z-index: 100;
    }

    .layout-menu.is-active { display: flex; }

    .layout-option {
    padding: var(--spacing-base);
    cursor: pointer;
    color: var(--color-secondary);
    text-align: left;
    display: flex;
    width: 100%;
    border: none;
    background: none;
    }

    .layout-option:hover {
    background-color: mediumorchid;
    }


</head>
<body>
<!-- Banner -->
<div class="topo">
    <div class="logo-ifsc">
        <img src="logo-ifsc.svg" alt="Logo IFSC">
    </div>
    <h1>IFSCEE - Veja C sendo Interpretado</h1>
    <div class="controles-topo">
        <button class="botao-ifsc" id="botaoLayout">Layouts</button>
        <button class="botao-ifsc" id="botaoConfig">‚öô</button>
    </div>
</div>

<!-- Container Principal -->
<div class="principal painelContainer">
    <!-- Arquivos -->
    <div class="arquivos bordaRedimensionavelDireita">
        <div class="cabecalho-ifsc">
            <div class="icone-cabecalho">üìÅ</div>
            <div class="titulo-cabecalho">ARQUIVOS</div>
            <button class="controle-cabecalho">‚óÄ</button>
        </div>
        <div class="conteudo">
            <div class="itemArquivo">
                <span class="iconeArquivo">‚ñº</span>
                <span class="iconeArquivo">üìÅ</span>
                <span>src</span>
            </div>
            <div class="itemArquivo subitem">
                <span class="iconeArquivo">üìÑ</span>
                <span>main.js</span>
            </div>
            <div class="itemArquivo subitem">
                <span class="iconeArquivo">üìÑ</span>
                <span>utils.js</span>
            </div>
            <div class="itemArquivo">
                <span class="iconeArquivo">‚ñ∂</span>
                <span class="iconeArquivo">üìÅ</span>
                <span>lib</span>
            </div>
            <div class="itemArquivo">
                <span class="iconeArquivo">üìÑ</span>
                <span>README.md</span>
            </div>
        </div>
    </div>

    <!-- Editor e Controles -->
    <div class="centro bordaRedimensionavelDireita">
        <!-- Editor -->
        <div class="editor bordaRedimensionavelBaixo">
            <div class="cabecalho-ifsc">
                <div class="icone-cabecalho">{ } </div>
                <div class="titulo-cabecalho">EDITOR DE C√ìDIGO</div>
                <button class="controle-cabecalho">‚óÄ</button>
            </div>
            <div class="conteudo">
                <!-- Conte√∫do do editor vai aqui -->
            </div>
        </div>

        <!-- Navega√ß√£o -->
        <div class="navegacao">
            <button class="botao-ifsc botao-primario">‚ñ∂ Executar</button>
            <button class="botao-ifsc botao-secundario">‚óÄ Anterior</button>
            <button class="botao-ifsc botao-secundario">‚ñ∂ Pr√≥ximo</button>
            <button class="botao-ifsc botao-perigo">‚Üª Reiniciar</button>
        </div>

        <!-- Container para Entrada e Sa√≠da -->
        <div class="containerEntradaSaida">
            <!-- Entrada -->
            <div class="entrada">
                <div class="cabecalho-ifsc">
                    <div class="icone-cabecalho">‚å® E</div>
                    <div class="titulo-cabecalho">ENTRADA</div>
                    <button class="controle-cabecalho">‚óÄ</button>
                    <button class="botaoAcao botaoExecutar">Executar</button>
                </div>
                <div class="conteudo">
                    <textarea class="areaTexto areaEntrada" placeholder="Digite o input aqui..."></textarea>
                </div>
            </div>

            <!-- Sa√≠da -->
            <div class="saida">
                <div class="cabecalho-ifsc">
                    <div class="icone-cabecalho">üñ•</div>
                    <div class="titulo-cabecalho">SAIDA</div>
                    <button class="controle-cabecalho">Limpar</button>
                </div>
                <div class="conteudo">
                    <pre class="areaTexto areaSaida"></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Mem√≥ria -->
    <div class="memoria">
        <div class="cabecalho-ifsc">
            <div class="icone-cabecalho">üñ•</div>
            <div class="titulo-cabecalho">MEM√ìRIA</div>
            <button class="controle-cabecalho">‚óÄ</button>
        </div>
        <div class="conteudo">
            <div class="containerPilhaHeap">
                <!-- Pilha -->
                <div class="pilha bordaRedimensionavelDireita">
                    <div class="cabecalho-ifsc">
                        <div class="icone-cabecalho">‚â°</div>
                        <div class="titulo-cabecalho">PILHA</div>
                        <button class="controle-cabecalho">‚óÄ</button>
                    </div>
                    <div class="conteudo">
                        <!-- Conte√∫do da pilha vai aqui -->
                    </div>
                </div>

                <!-- Heap -->
                <div class="heap">
                    <div class="cabecalho-ifsc">
                        <div class="icone-cabecalho">‚óè</div>
                        <div class="titulo-cabecalho">HEAP</div>
                        <button class="controle-cabecalho">‚óÄ</button>
                    </div>
                    <div class="conteudo">
                        <!-- Conte√∫do do heap vai aqui -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Tokens e AST -->
<div class="tokensAst painelContainer bordaRedimensionavelBaixo">
    <!-- Tokens -->
    <div class="tokens bordaRedimensionavelDireita">
        <div class="cabecalho-ifsc">
            <div class="icone-cabecalho">‚â°</div>
            <div class="titulo-cabecalho">TOKENS</div>
            <button class="controle-cabecalho">‚óÄ</button>
        </div>
        <div class="conteudo">
            <!-- Conte√∫do dos tokens vai aqui -->
        </div>
    </div>

    <!-- AST -->
    <div class="ast">
        <div class="cabecalho-ifsc">
            <div class="icone-cabecalho">{ }</div>
            <div class="titulo-cabecalho">AST</div>
            <button class="controle-cabecalho">‚óÄ</button>
        </div>
        <div class="conteudo">
            <!-- Conte√∫do do AST vai aqui -->
        </div>
    </div>
</div>

<!-- Rodap√© -->
<div class="rodape-ifsc">
    <div class="logo-ifsc-rodape">
        <img src="logo-ifsc-horizontal.svg" alt="IFSC">
    </div>
    <div class="info-rodape">
        <p>Instituto Federal de Santa Catarina</p>
        <p>¬© 2025 - IFSCEE - Desenvolvido por [seu nome]</p>
    </div>
</div>

<!-- Modal de Configura√ß√£o -->
<div id="fundoModal" class="fundoModal"></div>
<div id="modalConfig" class="modalConfig">
    <div class="cabecalhoModal">
        <h3>Configura√ß√µes de Layout</h3>
        <button id="fechaModal" class="fechaModal">√ó</button>
    </div>

    <div class="opcoesLayout">
        <div class="cartaoLayout" data-layout="3">
            <div class="visualizacaoLayout">
                <div class="visualizacaoArquivos" style="width: 10%"></div>
                <div class="visualizacaoEditor" style="width: 60%"></div>
                <div class="visualizacaoMemoria" style="width: 30%"></div>
            </div>
            <div class="nomeLayout">Foco no Editor</div>
            <div class="descricaoLayout">10-60-30</div>
        </div>

        <div class="cartaoLayout" data-layout="4">
            <div class="visualizacaoLayout" style="flex-direction: column">
                <div class="visualizacaoArquivos" style="width: 100%; height: 33.33%"></div>
                <div class="visualizacaoEditor" style="width: 100%; height: 33.33%"></div>
                <div class="visualizacaoMemoria" style="width: 100%; height: 33.33%"></div>
            </div>
            <div class="nomeLayout">Layout Vertical</div>
            <div class="descricaoLayout">Empilhado</div>
        </div>

        <div class="cartaoLayout" data-layout="5">
            <div class="visualizacaoLayout">
                <div class="visualizacaoArquivos" style="width: 10%"></div>
                <div class="visualizacaoEditor" style="width: 50%"></div>
                <div class="visualizacaoMemoria" style="width: 40%"></div>
            </div>
            <div class="nomeLayout">Tela Dividida</div>
            <div class="descricaoLayout">10-50-40</div>
        </div>

        <div class="cartaoLayout" data-layout="6">
            <div class="visualizacaoLayout">
                <div class="visualizacaoArquivos" style="width: 10%"></div>
                <div class="visualizacaoEditor" style="width: 30%"></div>
                <div class="visualizacaoMemoria" style="width: 60%"></div>
            </div>
            <div class="nomeLayout">Foco na Mem√≥ria</div>
            <div class="descricaoLayout">10-30-60</div>
        </div>
    </div>

    <!-- Personaliza√ß√£o de Layout -->
    <div class="containerPersonalizacao">
        <div class="tituloPersonalizacao">Personaliza√ß√£o de Layout</div>

        <div class="containerCaixaSelecao">
            <input type="checkbox" id="habilitaPersonalizacao" class="caixaSelecaoPersonalizada" aria-label="Habilitar personaliza√ß√£o">
            <label for="habilitaPersonalizacao">Habilitar valores personalizados</label>
        </div>

        <div class="camposPersonalizados">
            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="larguraArquivos">Largura Arquivos (%)</label>
                <input type="number" id="larguraArquivos" class="entradaPersonalizada" value="10" min="5" max="95">
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="larguraEditor">Largura Editor (%)</label>
                <input type="number" id="larguraEditor" class="entradaPersonalizada" value="30" min="5" max="95">
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="larguraMemoria">Largura Mem√≥ria (%)</label>
                <input type="number" id="larguraMemoria" class="entradaPersonalizada" value="60" min="5" max="95">
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="larguraTokens">Largura Tokens (%)</label>
                <input type="number" id="larguraTokens" class="entradaPersonalizada" value="50" min="10" max="90">
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="larguraAst">Largura AST (%)</label>
                <input type="number" id="larguraAst" class="entradaPersonalizada" value="50" min="10" max="90">
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="larguraPilha">Largura Pilha (%)</label>
                <input type="number" id="larguraPilha" class="entradaPersonalizada" value="20" min="10" max="90">
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="larguraHeap">Largura Heap (%)</label>
                <input type="number" id="larguraHeap" class="entradaPersonalizada" value="80" min="10" max="90">
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="alturaAst">Altura AST (vh)</label>
                <input type="number" id="alturaAst" class="entradaPersonalizada" value="20" min="5" max="50">
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="direcaoPrincipal">Dire√ß√£o Principal</label>
                <select id="direcaoPrincipal" class="entradaPersonalizada">
                    <option value="row">Horizontal</option>
                    <option value="column">Vertical</option>
                </select>
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="direcaoTokensAst">Dire√ß√£o Tokens/AST</label>
                <select id="direcaoTokensAst" class="entradaPersonalizada">
                    <option value="row">Horizontal</option>
                    <option value="column">Vertical</option>
                </select>
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="direcaoPilhaHeap">Dire√ß√£o Pilha/Heap</label>
                <select id="direcaoPilhaHeap" class="entradaPersonalizada">
                    <option value="row">Horizontal</option>
                    <option value="column">Vertical</option>
                </select>
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="direcaoEntradaSaida">Dire√ß√£o Entrada/Sa√≠da</label>
                <select id="direcaoEntradaSaida" class="entradaPersonalizada">
                    <option value="row">Horizontal</option>
                    <option value="column">Vertical</option>
                </select>
            </div>

            <div class="campoPersonalizado">
                <label class="rotuloPersonalizado" for="nomeLayout">Nome do Layout</label>
                <input type="text" id="nomeLayout" class="entradaPersonalizada" value="Meu Layout" maxlength="20">
            </div>
        </div>
    </div>

    <button id="aplicaLayout" class="botaoAcao botaoAplicar">Aplicar Layout</button>
</div>

<script>
    // Vari√°veis para armazenar as configura√ß√µes de layout
    let layoutSelecionado = localStorage.getItem('layoutPreferido') || '6'; // Layout 6 como padr√£o
    let layoutsPersonalizados = JSON.parse(localStorage.getItem('layoutsPersonalizados') || '{}');

    // Fun√ß√£o para alternar o menu de layouts
    function alternaMenu() {
        const menu = document.getElementById('menuLayouts');
        menu.classList.toggle('ativo');
    }

    // Fun√ß√£o para abrir a janela modal de configura√ß√£o
    function abreModalConfig() {
        const modal = document.getElementById('modalConfig');
        const fundoModal = document.getElementById('fundoModal');
        modal.classList.add('ativo');
        fundoModal.classList.add('ativo');

        // Marcar o layout atual como selecionado
        const layoutAtual = localStorage.getItem('layoutPreferido') || '6';
        document.querySelectorAll('.cartaoLayout').forEach(cartao => {
            if (cartao.getAttribute('data-layout') === layoutAtual) {
                cartao.classList.add('selecionado');
            } else {
                cartao.classList.remove('selecionado');
            }
        });
    }

    // Fun√ß√£o para fechar a janela modal de configura√ß√£o
    function fechaModalConfig() {
        const modal = document.getElementById('modalConfig');
        const fundoModal = document.getElementById('fundoModal');
        modal.classList.remove('ativo');
        fundoModal.classList.remove('ativo');
    }

    // Fun√ß√£o para mudar o layout
    function mudaLayout(numero) {
        const body = document.body;

        // Remover todas as classes de layout existentes
        body.classList.remove('layout3', 'layout4', 'layout5', 'layout6');
        body.classList.remove('layoutPersonalizado');

        // Verificar se √© um layout personalizado
        if (numero === 'personalizado') {
            aplicaLayoutPersonalizado();
            body.classList.add('layoutPersonalizado');
        }
        // Adicionar a classe de layout selecionada
        else {
            body.classList.add('layout' + numero);
        }

        // Salvar a prefer√™ncia do usu√°rio
        localStorage.setItem('layoutPreferido', numero);

        // Fechar o menu
        document.getElementById('menuLayouts').classList.remove('ativo');

        // Marcar o layout selecionado no modal
        document.querySelectorAll('.cartaoLayout').forEach(cartao => {
            if (cartao.getAttribute('data-layout') === numero.toString()) {
                cartao.classList.add('selecionado');
            } else {
                cartao.classList.remove('selecionado');
            }
        });
    }

    // Fun√ß√£o para aplicar layout personalizado
    function aplicaLayoutPersonalizado() {
        // Verificar se o checkbox est√° marcado
        const habilitaPersonalizacao = document.getElementById('habilitaPersonalizacao').checked;

        if (!habilitaPersonalizacao) return;

        // Pegar valores dos campos
        const larguraArquivos = document.getElementById('larguraArquivos').value + '%';
        const larguraEditor = document.getElementById('larguraEditor').value + '%';
        const larguraMemoria = document.getElementById('larguraMemoria').value + '%';
        const larguraTokens = document.getElementById('larguraTokens').value + '%';
        const larguraAst = document.getElementById('larguraAst').value + '%';
        const larguraPilha = document.getElementById('larguraPilha').value + '%';
        const larguraHeap = document.getElementById('larguraHeap').value + '%';
        const alturaAst = document.getElementById('alturaAst').value + 'vh';
        const direcaoPrincipal = document.getElementById('direcaoPrincipal').value;
        const direcaoTokensAst = document.getElementById('direcaoTokensAst').value;
        const direcaoPilhaHeap = document.getElementById('direcaoPilhaHeap').value;
        const direcaoEntradaSaida = document.getElementById('direcaoEntradaSaida').value;
        const nomeLayout = document.getElementById('nomeLayout').value;

        // Aplicar os valores √†s vari√°veis CSS
        document.documentElement.style.setProperty('--larguraArquivos', larguraArquivos);
        document.documentElement.style.setProperty('--larguraEditor', larguraEditor);
        document.documentElement.style.setProperty('--larguraMemoria', larguraMemoria);
        document.documentElement.style.setProperty('--larguraTokens', larguraTokens);
        document.documentElement.style.setProperty('--larguraAst', larguraAst);
        document.documentElement.style.setProperty('--larguraPilha', larguraPilha);
        document.documentElement.style.setProperty('--larguraHeap', larguraHeap);
        document.documentElement.style.setProperty('--alturaAst', alturaAst);
        document.documentElement.style.setProperty('--direcaoPrincipal', direcaoPrincipal);
        document.documentElement.style.setProperty('--direcaoTokensAst', direcaoTokensAst);
        document.documentElement.style.setProperty('--direcaoPilhaHeap', direcaoPilhaHeap);
        document.documentElement.style.setProperty('--direcaoEntradaSaida', direcaoEntradaSaida);

        // Salvar configura√ß√µes personalizadas diretamente
        layoutsPersonalizados[nomeLayout] = {
            larguraArquivos,
            larguraEditor,
            larguraMemoria,
            larguraTokens,
            larguraAst,
            larguraPilha,
            larguraHeap,
            alturaAst,
            direcaoPrincipal,
            direcaoTokensAst,
            direcaoPilhaHeap,
            direcaoEntradaSaida,
            nomeLayout
        };
        localStorage.setItem('layoutsPersonalizados', JSON.stringify(layoutsPersonalizados));

        // Atualizar menu de layouts
        atualizaMenuPersonalizado();
    }

    // Fun√ß√£o para atualizar o menu com layouts personalizados
    function atualizaMenuPersonalizado() {
        // Verificar se j√° existe um item personalizado no menu
        let menuPersonalizado = document.querySelector('.opcaoLayout[data-tipo="personalizado"]');

        // Pegar o nome do layout atual
        const nomeLayout = document.getElementById('nomeLayout').value;

        if (!menuPersonalizado) {
            // Criar nova op√ß√£o no menu
            const menuLayouts = document.getElementById('menuLayouts');
            const novaOpcao = document.createElement('button');
            novaOpcao.className = 'opcaoLayout';
            novaOpcao.setAttribute('data-layout', 'personalizado');
            novaOpcao.setAttribute('data-tipo', 'personalizado');
            novaOpcao.textContent = nomeLayout;

            // Adicionar event listener
            novaOpcao.addEventListener('click', function() {
                mudaLayout('personalizado');
            });

            // Adicionar ao menu
            menuLayouts.appendChild(novaOpcao);
        } else {
            // Atualizar texto do item existente
            menuPersonalizado.textContent = nomeLayout;
        }
    }

    // Fun√ß√£o para configurar o redimensionamento horizontal
    function configuraRedimensionamentoHorizontal(elementoEsquerda, elementoDireita) {
        // Estado de arrasto
        let arrastando = false;
        let inicioX = 0;
        let larguraInicialEsq = 0;
        let larguraInicialDir = 0;

        // Fun√ß√£o para iniciar o arrasto
        function iniciaArrasto(e) {
            // Apenas reagir se o clique for pr√≥ximo √† borda direita (4px)
            const rect = elementoEsquerda.getBoundingClientRect();
            const x = e.clientX || (e.touches && e.touches[0].clientX);

            // Verificar se o clique foi pr√≥ximo √† borda direita
            if (x < rect.right - 5 || x > rect.right + 1) {
                return;
            }

            e.preventDefault();
            arrastando = true;
            inicioX = e.clientX || (e.touches && e.touches[0].clientX);
            larguraInicialEsq = elementoEsquerda.offsetWidth;
            larguraInicialDir = elementoDireita.offsetWidth;

            // Adicionar classe para indicar que est√° redimensionando
            document.body.classList.add('redimensionandoH');

            // Impedir sele√ß√£o de texto durante o arrasto
            document.body.style.userSelect = 'none';
        }

        // Fun√ß√£o para executar durante o arrasto
        function duranteArrasto(e) {
            if (!arrastando) return;

            const x = e.clientX || (e.touches && e.touches[0].clientX);
            const deslocamento = x - inicioX;

            // Calcular novas larguras
            const container = elementoEsquerda.parentElement;
            const larguraTotal = container.offsetWidth;

            // Larguras m√≠nimas (10% do total)
            const larguraMinima = larguraTotal * 0.1;

            // Novas larguras em pixels
            let novaLarguraEsq = larguraInicialEsq + deslocamento;
            let novaLarguraDir = larguraInicialDir - deslocamento;

            // Verificar limites m√≠nimos
            if (novaLarguraEsq < larguraMinima || novaLarguraDir < larguraMinima) {
                return;
            }

            // Converter para porcentagens
            const porcentagemEsq = (novaLarguraEsq / larguraTotal) * 100;
            const porcentagemDir = (novaLarguraDir / larguraTotal) * 100;

            // Aplicar novas larguras
            elementoEsquerda.style.width = porcentagemEsq + '%';
            elementoDireita.style.width = porcentagemDir + '%';
        }

        // Fun√ß√£o para encerrar o arrasto
        function encerraArrasto() {
            if (!arrastando) return;

            arrastando = false;
            document.body.classList.remove('redimensionandoH');

            // Reativar sele√ß√£o de texto
            document.body.style.userSelect = '';
        }

        // Registrar eventos para mouse
        elementoEsquerda.addEventListener('mousedown', iniciaArrasto);
        document.addEventListener('mousemove', duranteArrasto);
        document.addEventListener('mouseup', encerraArrasto);

        // Registrar eventos para toque
        elementoEsquerda.addEventListener('touchstart', iniciaArrasto);
        document.addEventListener('touchmove', duranteArrasto);
        document.addEventListener('touchend', encerraArrasto);
    }

    // Fun√ß√£o para configurar o redimensionamento vertical
    function configuraRedimensionamentoVertical(elementoCima, elementoBaixo) {
        // Estado de arrasto
        let arrastando = false;
        let inicioY = 0;
        let alturaInicialCima = 0;
        let alturaInicialBaixo = 0;

        // Fun√ß√£o para iniciar o arrasto
        function iniciaArrasto(e) {
            // Apenas reagir se o clique for pr√≥ximo √† borda inferior (4px)
            const rect = elementoCima.getBoundingClientRect();
            const y = e.clientY || (e.touches && e.touches[0].clientY);

            // Verificar se o clique foi pr√≥ximo √† borda inferior
            if (y < rect.bottom - 5 || y > rect.bottom + 1) {
                return;
            }

            e.preventDefault();
            arrastando = true;
            inicioY = e.clientY || (e.touches && e.touches[0].clientY);
            alturaInicialCima = elementoCima.offsetHeight;
            alturaInicialBaixo = elementoBaixo.offsetHeight;

            // Adicionar classe para indicar que est√° redimensionando
            document.body.classList.add('redimensionandoV');

            // Impedir sele√ß√£o de texto durante o arrasto
            document.body.style.userSelect = 'none';
        }

        // Fun√ß√£o para executar durante o arrasto
        function duranteArrasto(e) {
            if (!arrastando) return;

            const y = e.clientY || (e.touches && e.touches[0].clientY);
            const deslocamento = y - inicioY;

            // Calcular novas alturas
            const container = elementoCima.parentElement;
            const alturaTotal = container.offsetHeight;

            // Alturas m√≠nimas (10% do total)
            const alturaMinima = alturaTotal * 0.1;

            // Novas alturas em pixels
            let novaAlturaCima = alturaInicialCima + deslocamento;
            let novaAlturaBaixo = alturaInicialBaixo - deslocamento;

            // Verificar limites m√≠nimos
            if (novaAlturaCima < alturaMinima || novaAlturaBaixo < alturaMinima) {
                return;
            }

            // Converter para porcentagens
            const porcentagemCima = (novaAlturaCima / alturaTotal) * 100;
            const porcentagemBaixo = (novaAlturaBaixo / alturaTotal) * 100;

            // Aplicar novas alturas
            elementoCima.style.height = porcentagemCima + '%';
            elementoBaixo.style.height = porcentagemBaixo + '%';
        }

        // Fun√ß√£o para encerrar o arrasto
        function encerraArrasto() {
            if (!arrastando) return;

            arrastando = false;
            document.body.classList.remove('redimensionandoV');

            // Reativar sele√ß√£o de texto
            document.body.style.userSelect = '';
        }

        // Registrar eventos para mouse
        elementoCima.addEventListener('mousedown', iniciaArrasto);
        document.addEventListener('mousemove', duranteArrasto);
        document.addEventListener('mouseup', encerraArrasto);

        // Registrar eventos para toque
        elementoCima.addEventListener('touchstart', iniciaArrasto);
        document.addEventListener('touchmove', duranteArrasto);
        document.addEventListener('touchend', encerraArrasto);
    }

    // Inicializar a aplica√ß√£o quando o DOM estiver pronto
    document.addEventListener('DOMContentLoaded', function() {
        // Desabilitar campos de personaliza√ß√£o por padr√£o
        const camposPersonalizados = document.querySelectorAll('.entradaPersonalizada');
        camposPersonalizados.forEach(campo => {
            campo.disabled = true;
        });

        // Event listener para o bot√£o de menu
        document.getElementById('botaoMenu').addEventListener('click', alternaMenu);

        // Event listener para o bot√£o de configura√ß√£o
        document.getElementById('botaoConfig').addEventListener('click', abreModalConfig);

        // Event listener para fechar o modal
        document.getElementById('fechaModal').addEventListener('click', fechaModalConfig);
        document.getElementById('fundoModal').addEventListener('click', fechaModalConfig);

        // Event listeners para os cards de layout no modal
        document.querySelectorAll('.cartaoLayout').forEach(cartao => {
            cartao.addEventListener('click', function() {
                // Remover sele√ß√£o anterior
                document.querySelectorAll('.cartaoLayout').forEach(c => c.classList.remove('selecionado'));

                // Adicionar sele√ß√£o atual
                this.classList.add('selecionado');

                // Armazenar o layout selecionado
                layoutSelecionado = this.getAttribute('data-layout');
            });
        });

        // Event listener para o bot√£o aplicar
        document.getElementById('aplicaLayout').addEventListener('click', function() {
            // Verificar se a personaliza√ß√£o est√° habilitada
            const habilitaPersonalizacao = document.getElementById('habilitaPersonalizacao').checked;

            if (habilitaPersonalizacao) {
                // Validar que a soma dos percentuais √© 100%
                const larguraArquivos = parseInt(document.getElementById('larguraArquivos').value);
                const larguraEditor = parseInt(document.getElementById('larguraEditor').value);
                const larguraMemoria = parseInt(document.getElementById('larguraMemoria').value);
                const larguraTokens = parseInt(document.getElementById('larguraTokens').value);
                const larguraAst = parseInt(document.getElementById('larguraAst').value);
                const larguraPilha = parseInt(document.getElementById('larguraPilha').value);
                const larguraHeap = parseInt(document.getElementById('larguraHeap').value);

                const totalColunas = larguraArquivos + larguraEditor + larguraMemoria;
                const totalTokensAst = larguraTokens + larguraAst;
                const totalPilhaHeap = larguraPilha + larguraHeap;

                if (totalColunas !== 100) {
                    alert('A soma das larguras das colunas principais deve ser igual a 100%. Atual: ' + totalColunas + '%');
                    return;
                }

                if (totalTokensAst !== 100) {
                    alert('A soma das larguras de Tokens e AST deve ser igual a 100%. Atual: ' + totalTokensAst + '%');
                    return;
                }

                if (totalPilhaHeap !== 100) {
                    alert('A soma das larguras de Pilha e Heap deve ser igual a 100%. Atual: ' + totalPilhaHeap + '%');
                    return;
                }

                mudaLayout('personalizado');
            } else {
                mudaLayout(layoutSelecionado);
            }

            fechaModalConfig();
        });

        // Event listener para o checkbox de personaliza√ß√£o
        document.getElementById('habilitaPersonalizacao').addEventListener('change', function() {
            const camposPersonalizados = document.querySelectorAll('.entradaPersonalizada');
            const estaHabilitado = this.checked;

            // Habilitar/desabilitar campos
            camposPersonalizados.forEach(campo => {
                campo.disabled = !estaHabilitado;
            });

            // Se habilitado, pr√©-selecionar layout personalizado
            if (estaHabilitado) {
                document.querySelectorAll('.cartaoLayout').forEach(cartao => {
                    cartao.classList.remove('selecionado');
                });
                layoutSelecionado = 'personalizado';
            }
        });

        // Adicionar event listeners para todas as op√ß√µes de layout do menu
        document.querySelectorAll('.opcaoLayout').forEach(botao => {
            botao.addEventListener('click', function() {
                mudaLayout(this.getAttribute('data-layout'));
            });
        });

        // Verificar se h√° prefer√™ncia de layout salva
        const layoutSalvo = localStorage.getItem('layoutPreferido');
        if (layoutSalvo) {
            mudaLayout(layoutSalvo);
        } else {
            // Aplicar layout 6 como padr√£o se n√£o houver prefer√™ncia salva
            mudaLayout('6');
        }

        // Fechar o menu ao clicar fora dele
        document.addEventListener('click', function(evento) {
            const botaoMenu = document.getElementById('botaoMenu');
            const menuLayouts = document.getElementById('menuLayouts');

            if (!botaoMenu.contains(evento.target) && !menuLayouts.contains(evento.target)) {
                menuLayouts.classList.remove('ativo');
            }
        });

        // Inicializar sistema de redimensionamento
        setTimeout(function() {
            try {
                // Redimensionamento horizontal para todos os pain√©is adjacentes
                const elementosRedimensionaveis = document.querySelectorAll('.bordaRedimensionavelDireita');
                elementosRedimensionaveis.forEach(elemento => {
                    const proximoElemento = elemento.nextElementSibling;
                    if (proximoElemento) {
                        configuraRedimensionamentoHorizontal(elemento, proximoElemento);
                    }
                });

                // Redimensionamento vertical
                const elementosRedimensionaveisVertical = document.querySelectorAll('.bordaRedimensionavelBaixo');
                elementosRedimensionaveisVertical.forEach(elemento => {
                    const proximoElemento = elemento.nextElementSibling;
                    if (proximoElemento) {
                        configuraRedimensionamentoVertical(elemento, proximoElemento);
                    }
                });

                // Configura√ß√£o espec√≠fica para componentes principais
                configuraRedimensionamentoVertical(
                    document.querySelector('.principal'),
                    document.querySelector('.tokensAst')
                );

                console.log('Sistema de redimensionamento inicializado com sucesso');
            } catch (erro) {
                console.error('Erro ao inicializar sistema de redimensionamento:', erro);
            }
        }, 1000);

        // Carregar layout personalizado salvo
        const layoutsPersonalizadosSalvos = JSON.parse(localStorage.getItem('layoutsPersonalizados') || '{}');
        if (Object.keys(layoutsPersonalizadosSalvos).length > 0) {
            // Pegar o primeiro layout personalizado
            const primeiroLayout = Object.keys(layoutsPersonalizadosSalvos)[0];
            const config = layoutsPersonalizadosSalvos[primeiroLayout];

            // Preencher os campos
            document.getElementById('larguraArquivos').value = parseInt(config.larguraArquivos);
            document.getElementById('larguraEditor').value = parseInt(config.larguraEditor);
            document.getElementById('larguraMemoria').value = parseInt(config.larguraMemoria);

            if (config.larguraTokens) document.getElementById('larguraTokens').value = parseInt(config.larguraTokens);
            if (config.larguraAst) document.getElementById('larguraAst').value = parseInt(config.larguraAst);
            if (config.larguraPilha) document.getElementById('larguraPilha').value = parseInt(config.larguraPilha);
            if (config.larguraHeap) document.getElementById('larguraHeap').value = parseInt(config.larguraHeap);

            document.getElementById('alturaAst').value = parseInt(config.alturaAst);
            document.getElementById('direcaoPrincipal').value = config.direcaoPrincipal;
            document.getElementById('direcaoTokensAst').value = config.direcaoTokensAst;
            document.getElementById('direcaoPilhaHeap').value = config.direcaoPilhaHeap;
            document.getElementById('direcaoEntradaSaida').value = config.direcaoEntradaSaida;
            document.getElementById('nomeLayout').value = config.nomeLayout;

            // Adicionar ao menu
            atualizaMenuPersonalizado();
        }
    });
</script>



<script src="token.js"></script>
<script src="js/analisadorLexico.js"></script>
<script src="js/analisadorSintatico.js"></script>
<script src="js/noAst.js"></script>
<script src="js/gerenciadorMemoria.js"></script>
<script src="js/interpretadorC.js"></script>
<script src="js/registroExecucao.js"></script>
<script src="js/simuladorIO.js"></script>

</body>
</html>